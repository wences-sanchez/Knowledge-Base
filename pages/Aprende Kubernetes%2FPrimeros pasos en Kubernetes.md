title:: Aprende Kubernetes/Primeros pasos en Kubernetes
tags:: LinkedIn-Learning, Kubernetes

- #tags #LinkedIn-Learning #Kubernetes
-
-
- ## La herramienta kubectl
	- `$ kubectl <comando> <parámetros>`
-
-
- ## El panel de control o dashboard de Kubernetes
	- El dashboard es peligroso porque requiere permisos totales.
		- Por eso no se recomienda para entornos que sean de producción.
-
	- ### Flashcards
		- ¿Por qué se desaconseja el uso del dashboard de Kubernetes en favor de la CLI? #flashcard
			- El dashboard es peligroso porque requiere permisos totales.
				- Por eso no se recomienda para entornos que sean de producción.
-
-
- ## Crear un pod en Kubernetes
	- `$ kubectl apply -f mi-fichero.yml`
	- `$ kubectl delete -f mi-fichero.yml`
	- `$ kubectl describe pod mi-pod`
	- Un `kubectl apply` no puede añadir ni quitar contenedores.
		- Hay que hacer un `kubectl delete` y `kubectl create`
	-
	-
- ## Crear un despliegue en Kubernetes
	- Un deployment es un proceso declarativo
	- Los selectores ayudan al deployment a encontrar los pods que dependen de él gracias a unas etiquetas.
		- Y esas mismas etiquetas se las tenemos que asignar a cada uno de los contenedores.
		- Ayudan, pero no hacen que si tuviésemos otro pod con el mismo label (que nosotros por nuestra cuenta creemos) nos lo vaya a parar o a arrancar.
		- La utilidad de los despliegues es simplemente tener siempre pods ejecutándose, los que queramos.
	-
	- ### Flashcards
		- ¿Dónde le tenemos que indicar a Kubernetes el número de instancias que queremos? #flashcard #dev-notes
			- En `spec:`. Justo antes de `selector:`, así:
				- `replicas: 3` **O el número que quieras :P**
				-
		- ¿Cómo se comportan los deployments en Kubernetes si añadimos nuevos pods con mismo label? #flashcard
			- Los selectores ayudan al deployment a encontrar los pods que dependen de él gracias a unas etiquetas.
				- Y esas mismas etiquetas se las tenemos que asignar a cada uno de los contenedores.
				- Ayudan, pero no hacen que si tuviésemos otro pod con el mismo label (que nosotros por nuestra cuenta creemos) nos lo vaya a parar o a arrancar.
			- La utilidad de los despliegues es simplemente tener siempre pods ejecutándose, los que queramos.
			-
			-
- ## Crear un servicio en Kubernetes
	- Un servicio en Kubernetes es esencialmente importante porque las IPs de cada pod son efímeras.
		- Así, necesitamos un mecanismo que exponga una IP que no cambie (persistente) para poder usar nuestra aplicación.
		- Podríamos usar simplemente un balanceador de carga. Pero necesitaríamos actualizar cada vez las direcciones de cada pod igualmente.
		- La solución es un servicio
	-
	- El **servicio** tiene un **selector**, que vamos a ver ahora qué sentido tiene y que redirige las llamadas del puerto 80 hasta el puerto 80 de los POD.
		- Este **selector** (del servicio) lo que indica es a qué post se va a acoplar o a qué POD se va a repartir el tráfico cuando tenga una llamada.
	- De la misma manera que en un **despliegue** nosotros teníamos un "matchlabel" que nos indicaba qué pods iban a quedar debajo de este despliegue, que POD iba a gestionar,
		- en un **servicio** apuntamos a una **etiqueta** para saber a qué POD tenemos que **lanzarles** las peticiones.
	-
	- ### Flashcards
		- ¿Qué uso tiene un servicio en *Kubernetes*? #flashcard
			- Un servicio en Kubernetes es esencialmente importante porque las IPs de cada pod son efímeras.
				- Así, necesitamos un mecanismo que exponga una IP que no cambie (persistente) para poder usar nuestra aplicación.
				- Podríamos usar simplemente un balanceador de carga. Pero necesitaríamos actualizar cada vez las direcciones de cada pod igualmente.
			- Así, la solución es un servicio.
		- ¿De qué manera usan, en *Kubernetes*, las etiquetas los **deployment**?, ¿y los **servicios**? #flashcard
			- El **servicio** tiene un **selector** que le indica a qué post se va a acoplar o a qué pod se va a repartir el tráfico cuando tenga una llamada.
			- Relativo a los **deployment**, tienen un matchLabel que nos indica qué pods van a quedar debajo de justo ese despliegue, qué etiquetas van a tener los pods que va a gestionar.
				- Esto lo que hace es ayudarle a Kubernetes para saber y tener la información suficiente a la hora de levantar y/o borrar pods.
			-
	-
-